<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NourishNet - Bersama Lawan Kelaparan</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo-container">
                <i class="fas fa-utensils"></i>
                <span>NourishNet</span>
            </a>
            <div class="nav-menu" id="nav-menu">
                <a href="about.html" class="nav-link">Tentang Kami</a>
                <a href="program.html" class="nav-link">Program</a>
                <a href="blog.html" class="nav-link">Edukasi</a>
                <a href="donasi.html" class="nav-link">Donasi</a>
                <a href="contact.html" class="nav-link">Kontak</a>
                
                <!-- Login Button (shown when not logged in) -->
                <a href="login.html" class="nav-link btn-login" id="loginBtn">Login</a>
                
                <!-- Profile Menu (shown when logged in) -->
                <div class="profile-menu" id="profileMenu" style="display: none;">
                    <div class="profile-trigger" id="profileTrigger">
                        <div class="profile-avatar" id="profileAvatar">
                            <span id="profileInitials">U</span>
                        </div>
                        <span id="profileUsername">User</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="profile-dropdown" id="profileDropdown">
                        <a href="relawan.html" class="dropdown-item">
                            <i class="fas fa-users"></i>
                            <span>Kelola Relawan</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user"></i>
                            <span>Profil Saya</span>
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-cog"></i>
                            <span>Pengaturan</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item logout-btn" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Keluar</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-bg">
            <div class="hero-overlay"></div>
            <div class="floating-elements">
                <div class="floating-element" style="--delay: 0s; --duration: 6s;"></div>
                <div class="floating-element" style="--delay: 2s; --duration: 8s;"></div>
                <div class="floating-element" style="--delay: 4s; --duration: 7s;"></div>
                <div class="floating-element" style="--delay: 1s; --duration: 7s;"></div>
                <div class="floating-element" style="--delay: 3s; --duration: 5s;"></div>
            </div>
        </div>
        <div class="hero-container">
            <div class="hero-content">
                <div class="hero-text">
                    <div class="hero-badge">
                        <i class="fas fa-heart"></i>
                        <span>SDGs 2: Zero Hunger</span>
                    </div>
                    <h1 class="hero-title">
                        <span class="title-line">Bersama Lawan</span>
                        <span class="title-line highlight">Kelaparan</span>
                        <span class="title-line">Untuk Masa Depan</span>
                        <span class="title-line highlight">Tanpa Lapar</span>
                    </h1>
                    <p class="hero-description">
                        NourishNet adalah platform yang menghubungkan pemberi bantuan dengan komunitas rawan pangan,
                        menyediakan edukasi gizi, dan memfasilitasi program distribusi pangan untuk mendukung
                        SDGs 2: Zero Hunger di Indonesia.
                    </p>
                    <div class="hero-stats">
                        <div class="stat-item">
                            <span class="stat-number">125K+</span>
                            <span class="stat-label">Porsi Makanan</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">15K+</span>
                            <span class="stat-label">Penerima Manfaat</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">500+</span>
                            <span class="stat-label">Relawan Aktif</span>
                        </div>
                    </div>
                    <div class="hero-buttons">
                        <a href="donasi.html" class="btn btn-primary">
                            <i class="fas fa-heart"></i>
                            <span>Donasi Sekarang</span>
                            <div class="btn-shine"></div>
                        </a>
                        <a href="program.html" class="btn btn-outline">
                            <i class="fas fa-users"></i>
                            <span>Ikut Relawan</span>
                        </a>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="hero-image-container">
                        <img src="https://images.unsplash.com/photo-1593113598332-cd288d649433?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600" alt="Kegiatan NourishNet" class="hero-image">
                        <div class="image-overlay">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="scroll-indicator">
            <div class="scroll-arrow">
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </section>

    <section class="impact" id="impact-section">
        <div class="container">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-chart-line"></i>
                    <span>Dampak Nyata</span>
                </div>
                <h2>Perubahan yang Telah Kita Ciptakan</h2>
                <p>Bersama-sama kita telah membuat dampak positif yang nyata bagi masyarakat Indonesia.</p>
            </div>
            <div class="impact-grid">
                <div class="impact-card">
                    <div class="impact-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="impact-content">
                        <span class="impact-number" data-target="125000">0</span>
                        <p>Porsi Makanan Bergizi Disalurkan</p>
                        <div class="impact-progress">
                            <div class="progress-bar" data-width="85%"></div>
                        </div>
                    </div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="impact-content">
                        <span class="impact-number" data-target="15000">0</span>
                        <p>Penerima Manfaat Langsung</p>
                        <div class="impact-progress">
                            <div class="progress-bar" data-width="75%"></div>
                        </div>
                    </div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <div class="impact-content">
                        <span class="impact-number" data-target="500">0</span>
                        <p>Relawan Aktif Terdaftar</p>
                        <div class="impact-progress">
                            <div class="progress-bar" data-width="90%"></div>
                        </div>
                    </div>
                </div>
                <div class="impact-card">
                    <div class="impact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="impact-content">
                        <span class="impact-number" data-target="50">0</span>
                        <p>Kota di Seluruh Indonesia</p>
                        <div class="impact-progress">
                            <div class="progress-bar" data-width="60%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="programs-preview">
        <div class="container">
            <div class="section-header">
                <div class="section-badge">
                    <i class="fas fa-rocket"></i>
                    <span>Program Unggulan</span>
                </div>
                <h2>Inisiatif untuk Indonesia Bebas Kelaparan</h2>
                <p>Berbagai program inovatif yang telah terbukti memberikan dampak nyata.</p>
            </div>
            <div class="programs-grid">
                <div class="program-card featured">
                    <div class="program-image">
                        <img src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=300" alt="Pangan Sehat Gratis">
                        <div class="program-badge">Unggulan</div>
                    </div>
                    <div class="program-content">
                        <div class="program-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <h3>Pangan Sehat Gratis</h3>
                        <p>Distribusi makanan bergizi ke panti asuhan, kampung, dan komunitas rawan pangan di seluruh Indonesia.</p>
                        <div class="program-stats">
                            <div class="stat">
                                <span class="stat-value">125K+</span>
                                <span class="stat-label">Porsi Disalurkan</span>
                            </div>
                            <div class="stat">
                                <span class="stat-value">50+</span>
                                <span class="stat-label">Kota</span>
                            </div>
                        </div>
                        <a href="program.html" class="program-link">
                            <span>Pelajari Lebih Lanjut</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-image">
                        <img src="https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=300" alt="Urban Farming">
                    </div>
                    <div class="program-content">
                        <div class="program-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <h3>Urban Farming</h3>
                        <p>Program edukasi bercocok tanam dan gizi seimbang di sekolah-sekolah untuk masa depan berkelanjutan.</p>
                        <a href="program.html" class="program-link">
                            <span>Lihat Program</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
                <div class="program-card">
                    <div class="program-image">
                        <img src="https://images.unsplash.com/photo-1559027615-cd4628902d4a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&h=300" alt="Donasi Sembako">
                    </div>
                    <div class="program-content">
                        <div class="program-icon">
                            <i class="fas fa-hand-holding-heart"></i>
                        </div>
                        <h3>Donasi Sembako</h3>
                        <p>Platform donasi online yang memudahkan masyarakat berdonasi sembako dengan sistem transparan.</p>
                        <a href="donasi.html" class="program-link">
                            <span>Mulai Donasi</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cta">
        <div class="cta-bg">
            <div class="cta-overlay"></div>
        </div>
        <div class="container">
            <div class="cta-content">
                <div class="cta-text">
                    <h2>Mari Bergabung Mewujudkan Indonesia Bebas Kelaparan</h2>
                    <p>Setiap kontribusi Anda, sekecil apapun, dapat membuat perbedaan besar dalam kehidupan seseorang. Bergabunglah dengan ribuan orang baik lainnya.</p>
                </div>
                <div class="cta-buttons">
                    <a href="donasi.html" class="btn btn-light">
                        <i class="fas fa-heart"></i>
                        <span>Mulai Berdonasi</span>
                        <div class="btn-shine"></div>
                    </a>
                    <a href="contact.html" class="btn btn-outline-light">
                        <i class="fas fa-users"></i>
                        <span>Daftar Relawan</span>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-bg">
            <div class="footer-pattern"></div>
        </div>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section brand-section">
                    <div class="footer-brand">
                        <div class="logo-container">
                            <i class="fas fa-utensils"></i>
                            <span>NourishNet</span>
                        </div>
                    </div>
                    <p>Platform edukasi, advokasi, dan distribusi pangan untuk mewujudkan Indonesia bebas kelaparan melalui kolaborasi dan inovasi berkelanjutan.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Program</h3>
                    <ul>
                        <li><a href="program.html">Pangan Sehat Gratis</a></li>
                        <li><a href="program.html">Urban Farming</a></li>
                        <li><a href="program.html">Donasi Sembako</a></li>
                        <li><a href="program.html">Bank Makanan</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Tentang</h3>
                    <ul>
                        <li><a href="about.html">Tentang Kami</a></li>
                        <li><a href="login.html">Login</a></li>
                        <li><a href="blog.html">Blog & Edukasi</a></li>
                        <li><a href="contact.html">Kontak</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Kontak</h3>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Jakarta, Indonesia</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>info@nourishnet.id</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>+62 21 1234 5678</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <p>&copy; 2024 NourishNet - Kelompok Auralis. Semua hak dilindungi.</p>
                    <div class="footer-links">
                        <a href="#">Kebijakan Privasi</a>
                        <a href="#">Syarat & Ketentuan</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="main-script.js">
        document.addEventListener('DOMContentLoaded', () => {
            const navbar = document.getElementById('navbar');
            const navToggle = document.getElementById('nav-toggle');
            const navMenu = document.getElementById('nav-menu');
            const navLinks = document.querySelectorAll('.nav-link');
            const impactSection = document.getElementById('impact-section');
            const impactNumbers = document.querySelectorAll('.impact-number');
            const progressBars = document.querySelectorAll('.progress-bar');
            const heroPlayButton = document.getElementById('hero-play-button');
            const videoModal = document.getElementById('videoModal');
            const videoPlayer = document.getElementById('videoPlayer');
            const videoModalCloseButton = videoModal ? videoModal.querySelector('.close-button') : null;
            const scrollIndicator = document.querySelector('.scroll-indicator');
            
            // Profile menu elements
            const loginBtn = document.getElementById('loginBtn');
            const profileMenu = document.getElementById('profileMenu');
            const profileTrigger = document.getElementById('profileTrigger');
            const profileDropdown = document.getElementById('profileDropdown');
            const profileAvatar = document.getElementById('profileAvatar');
            const profileInitials = document.getElementById('profileInitials');
            const profileUsername = document.getElementById('profileUsername');
            const logoutBtn = document.getElementById('logoutBtn');
            
            let countersAnimated = false;

            // Check login status on page load
            checkLoginStatus();

            function checkLoginStatus() {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    const userData = JSON.parse(currentUser);
                    showProfileMenu(userData);
                } else {
                    showLoginButton();
                }
            }

            function showProfileMenu(userData) {
                loginBtn.style.display = 'none';
                profileMenu.style.display = 'block';
                
                // Set user initials and username
                profileInitials.textContent = getUserInitials(userData.username);
                profileUsername.textContent = userData.username;
                
                // Set avatar background color based on username
                const colors = ['#059669', '#3B82F6', '#8B5CF6', '#EF4444', '#F59E0B', '#10B981'];
                const colorIndex = userData.username.length % colors.length;
                profileAvatar.style.backgroundColor = colors[colorIndex];
            }

            function showLoginButton() {
                loginBtn.style.display = 'block';
                profileMenu.style.display = 'none';
            }

            function getUserInitials(username) {
                return username.substring(0, 2).toUpperCase();
            }

            // Profile dropdown toggle
            if (profileTrigger) {
                profileTrigger.addEventListener('click', (e) => {
                    e.stopPropagation();
                    profileDropdown.classList.toggle('show');
                });
            }

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (profileDropdown && !profileMenu.contains(e.target)) {
                    profileDropdown.classList.remove('show');
                }
            });

            // Logout functionality
            if (logoutBtn) {
                logoutBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    localStorage.removeItem('currentUser');
                    showLoginButton();
                    profileDropdown.classList.remove('show');
                    
                    // Show logout message
                    if (typeof showAlert === 'function') {
                        showAlert('Anda telah berhasil logout.');
                    }
                });
            }

            // --- Navbar Scroll Effect ---
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });

            // --- Navbar Toggle for Responsive Menu ---
            if (navToggle && navMenu) {
                navToggle.addEventListener('click', () => {
                    navMenu.classList.toggle('active');
                    navToggle.classList.toggle('active');
                    document.body.classList.toggle('no-scroll');
                });

                navLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        if (navMenu.classList.contains('active')) {
                            navMenu.classList.remove('active');
                            navToggle.classList.remove('active');
                            document.body.classList.remove('no-scroll');
                        }
                    });
                });
            }

            // --- Active Navigation Link ---
            const currentPath = window.location.pathname.split('/').pop() || 'index.html';
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                }
            });

            // --- Counter Animation for Impact Section ---
            const animateCounter = (entry) => {
                if (entry.isIntersecting && !countersAnimated) {
                    impactNumbers.forEach(number => {
                        const target = +number.dataset.target;
                        const start = 0;
                        const duration = 2000;
                        let startTime = null;

                        const animate = (currentTime) => {
                            if (!startTime) startTime = currentTime;
                            const progress = (currentTime - startTime) / duration;
                            const value = Math.floor(progress * target);

                            if (target >= 1000) {
                                number.textContent = (value / 1000).toFixed(0) + 'K+';
                            } else {
                                number.textContent = value;
                            }

                            if (progress < 1) {
                                requestAnimationFrame(animate);
                            } else {
                                number.textContent = (target >= 1000) ? (target / 1000) + 'K+' : target;
                            }
                        };

                        requestAnimationFrame(animate);
                    });

                    progressBars.forEach(progressBar => {
                        const width = progressBar.dataset.width;
                        progressBar.style.width = width;
                    });

                    countersAnimated = true;
                }
            };

            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.5
            };

            const observer = new IntersectionObserver(entries => {
                entries.forEach(animateCounter);
            }, observerOptions);

            if (impactSection) {
                observer.observe(impactSection);
            }

            // --- Hero Image Play Button (Video Modal) ---
            const youtubeVideoId = 't-O1uLhI7iM';
            const youtubeEmbedUrl = `https://www.youtube.com/embed/${youtubeVideoId}?autoplay=1&rel=0`;

            if (heroPlayButton && videoModal && videoModalCloseButton && videoPlayer) {
                heroPlayButton.addEventListener('click', () => {
                    videoPlayer.src = youtubeEmbedUrl;
                    videoModal.classList.add('active');
                });

                videoModalCloseButton.addEventListener('click', () => {
                    videoModal.classList.remove('active');
                    videoPlayer.src = '';
                });

                videoModal.addEventListener('click', (e) => {
                    if (e.target === videoModal) {
                        videoModal.classList.remove('active');
                        videoPlayer.src = '';
                    }
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && videoModal.classList.contains('active')) {
                        videoModal.classList.remove('active');
                        videoPlayer.src = '';
                    }
                });
            }

            // --- Scroll to Impact Section ---
            if (scrollIndicator) {
                scrollIndicator.addEventListener('click', () => {
                    if (impactSection) {
                        window.scrollTo({
                            top: impactSection.offsetTop - navbar.clientHeight,
                            behavior: 'smooth'
                        });
                    }
                });
            }

            // --- Universal Alert Modal Logic ---
            const alertModal = document.getElementById('alertModal');
            const alertMessage = document.getElementById('alertMessage');
            const alertCloseButton = document.getElementById('alertCloseButton');
            const alertOkButton = document.getElementById('alertOkButton');

            function showAlert(message) {
                if (alertModal && alertMessage) {
                    alertMessage.textContent = message;
                    alertModal.classList.add('active');
                }
            }

            if (alertCloseButton) {
                alertCloseButton.addEventListener('click', () => {
                    alertModal.classList.remove('active');
                });
            }

            if (alertOkButton) {
                alertOkButton.addEventListener('click', () => {
                    alertModal.classList.remove('active');
                });
            }

            if (alertModal) {
                alertModal.addEventListener('click', (e) => {
                    if (e.target === alertModal) {
                        alertModal.classList.remove('active');
                    }
                });
            }

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && alertModal.classList.contains('active')) {
                    alertModal.classList.remove('active');
                }
            });

            // Make showAlert globally available
            window.showAlert = showAlert;
        });

        // Ensure no-scroll class is removed if page is reloaded
        document.body.classList.remove('no-scroll');
    </script>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    // ... elemen lain ...
    const loginBtn = document.getElementById('loginBtn');
    const profileMenu = document.getElementById('profileMenu');
    const profileTrigger = document.getElementById('profileTrigger');
    const profileDropdown = document.getElementById('profileDropdown');
    const profileInitials = document.getElementById('profileInitials');
    const profileUsername = document.getElementById('profileUsername');
    const logoutBtn = document.getElementById('logoutBtn');
    const kelolaRelawanLink = document.querySelector('a[href="relawan.html"]');

    function checkLoginStatus() {
        const currentUser = localStorage.getItem('currentUser');
        if (currentUser) {
            const userData = JSON.parse(currentUser);
            showProfileMenu(userData);
        } else {
            showLoginButton();
        }
    }

    function showProfileMenu(userData) {
        if(loginBtn) loginBtn.style.display = 'none';
        if(profileMenu) profileMenu.style.display = 'block';
        
        if(profileInitials) profileInitials.textContent = userData.username.substring(0, 1).toUpperCase();
        if(profileUsername) profileUsername.textContent = userData.username;

        // Sembunyikan link 'Kelola Relawan' jika bukan admin
        if (kelolaRelawanLink && userData.role !== 'admin') {
            kelolaRelawanLink.style.display = 'none';
        }
    }

    function showLoginButton() {
        if(loginBtn) loginBtn.style.display = 'block';
        if(profileMenu) profileMenu.style.display = 'none';
    }

    if (profileTrigger) {
        profileTrigger.addEventListener('click', (e) => {
            e.stopPropagation();
            if(profileDropdown) profileDropdown.classList.toggle('show');
        });
    }

    if (logoutBtn) {
        logoutBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            // Panggil API logout untuk menghancurkan session di server
            await fetch('api/logout.php');
            localStorage.removeItem('currentUser');
            showLoginButton();
            window.location.href = 'index.html'; // Arahkan ke beranda
        });
    }

    // Panggil fungsi pengecekan saat halaman dimuat
    checkLoginStatus();
});
</script>
</body>
</html>